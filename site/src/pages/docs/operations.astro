---
import fs from "node:fs";
import path from "node:path";
import { fileURLToPath } from "node:url";
import { Markdown } from "astro/components";

const pageDir = fileURLToPath(new URL(".", import.meta.url));
const repoRoot = path.resolve(pageDir, "../../../..");
const operationsDir = path.join(repoRoot, "docs/operations");
const files = fs
	.readdirSync(operationsDir)
	.filter((name) => name.endsWith(".md"))
	.sort();
const docs = files.map((filename) => ({
	filename,
	content: fs.readFileSync(path.join(operationsDir, filename), "utf-8"),
}));
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Operations Â· Talk to Me Goose</title>
  </head>
  <body>
    <main>
      {docs.map((doc) => (
        <article>
          <Markdown content={doc.content} />
        </article>
      ))}
    </main>
  </body>
</html>
